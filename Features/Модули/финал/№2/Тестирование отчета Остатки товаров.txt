#language: ru

@tree

Функционал: Тестирование отчета Остатки товаров

Как Тестировшик я хочу
проверить корретность формирования отчета Остатки товаров 
чтобы менеджер мог выводить правильные остатки   

Контекст:
	Дано Я запускаю сценарий открытия TestClient или подключаю уже существующий

Сценарий: Проверка отчета
* Загрузка данных для отчета
		И Подготовка данных по остаткам
* Тестирование отчета без отбора
		И Я открываю навигационную ссылку "e1cib/app/Отчет.ОстаткиТоваровНаСкладах?vrn=Основной"
		И я нажимаю на кнопку с именем 'ФормаСформировать'
		И табличный документ "Результат" содержит строки из макета "ОстаткиТоваровБезОтборов" по шаблону
		И я закрываю все окна клиентского приложения	
* Тестирование отчета с отбором по складу
		И Я открываю навигационную ссылку "e1cib/app/Отчет.ОстаткиТоваровНаСкладах?vrn=Основной"
		И из выпадающего списка с именем "КомпоновщикНастроекПользовательскиеНастройкиЭлемент2Значение" я выбираю точное значение 'Склад отдела продаж'
		И я нажимаю на кнопку с именем 'ФормаСформировать'
		И в табличном документе 'Результат' я перехожу к ячейке "R3C1"
		И элемент формы с именем "КомпоновщикНастроекПользовательскиеНастройкиЭлемент2Значение" стал равен 'Склад отдела продаж'
		И элемент формы с именем "КомпоновщикНастроекПользовательскиеНастройкиЭлемент2Использование" стал равен 'Да'
		Тогда табличный документ 'Результат' равен:
			| 'Отбор:'      | 'Склад Равно "Склад отдела продаж"' | ''                   |
			| ''            | ''                                  | ''                   |
			| 'Товар'       | 'Склад отдела продаж'               | 'Итого'              |
			| ''            | 'Количество Остаток'                | 'Количество Остаток' |
			| 'Sony К3456P' | '50,00'                             | '50,00'              |
			| 'Veko67NE'    | '50,00'                             | '50,00'              |
			| 'Veko876N'    | '100,00'                            | '100,00'             |
			| 'VekoNT02'    | '195,00'                            | '195,00'             |
			| 'Молоко'      | '100,00'                            | '100,00'             |
			| 'Торт '       | '100,00'                            | '100,00'             |
			| 'Итого'       | '595,00'                            | '595,00'             |
		И я снимаю флаг с именем 'КомпоновщикНастроекПользовательскиеНастройкиЭлемент2Использование'
		И я закрываю все окна клиентского приложения	
* Тестирование отчета с отбором по номенклатуре
		И я открываю навигационную ссылку "e1cib/app/Отчет.ОстаткиТоваровНаСкладах?vrn=Основной"
		И я нажимаю кнопку выбора у поля с именем "КомпоновщикНастроекПользовательскиеНастройкиЭлемент1Значение"
		И я нажимаю на кнопку с именем 'ФормаСписок'
		И в таблице 'Список' я перехожу к строке:
			| "Код"       | "Наименование" |
			| "000000027" | "Ряженка"      |
		И я нажимаю на кнопку с именем 'ФормаВыбрать'
		И элемент формы с именем "КомпоновщикНастроекПользовательскиеНастройкиЭлемент1Значение" стал равен 'Ряженка'
		И элемент формы с именем "КомпоновщикНастроекПользовательскиеНастройкиЭлемент1Использование" стал равен 'Да'
		И я нажимаю на кнопку с именем 'ФормаСформировать'
		Тогда табличный документ 'Результат' равен:
			| 'Отбор:'  | 'Товар Равно "Ряженка"' | ''                   | ''                   |
			| ''        | ''                      | ''                   | ''                   |
			| 'Товар'   | 'Малый'                 | 'Средний'            | 'Итого'              |
			| ''        | 'Количество Остаток'    | 'Количество Остаток' | 'Количество Остаток' |
			| 'Ряженка' | '400,00'                | '200,00'             | '600,00'             |
			| 'Итого'   | '400,00'                | '200,00'             | '600,00'             |
		И я снимаю флаг с именем 'КомпоновщикНастроекПользовательскиеНастройкиЭлемент1Использование'		
		И я закрываю все окна клиентского приложения
* Тестирование отчета с отбором по складу и номенклатуре
		И я открываю навигационную ссылку "e1cib/app/Отчет.ОстаткиТоваровНаСкладах?vrn=Основной"
		И из выпадающего списка с именем "КомпоновщикНастроекПользовательскиеНастройкиЭлемент2Значение" я выбираю точное значение 'Склад отдела продаж'
		И я нажимаю кнопку выбора у поля с именем "КомпоновщикНастроекПользовательскиеНастройкиЭлемент1Значение"
		И я нажимаю на кнопку с именем 'ФормаСписок'
		И в таблице 'Список' я перехожу к строке:
			| "Код"       | "Наименование" |
			| "000000026" | "Молоко"       |
		И я нажимаю на кнопку с именем 'ФормаВыбрать'
		И я нажимаю на кнопку с именем 'ФормаСформировать'
		И элемент формы с именем "КомпоновщикНастроекПользовательскиеНастройкиЭлемент1ВидСравненияЭлементаОтбора" стал равен 'Равно'
		И элемент формы с именем "КомпоновщикНастроекПользовательскиеНастройкиЭлемент1Значение" стал равен 'Молоко'
		И элемент формы с именем "КомпоновщикНастроекПользовательскиеНастройкиЭлемент1Использование" стал равен 'Да'
		И элемент формы с именем "КомпоновщикНастроекПользовательскиеНастройкиЭлемент2ВидСравненияЭлементаОтбора" стал равен 'Равно'
		И элемент формы с именем "КомпоновщикНастроекПользовательскиеНастройкиЭлемент2Значение" стал равен 'Склад отдела продаж'
		И элемент формы с именем "КомпоновщикНастроекПользовательскиеНастройкиЭлемент2Использование" стал равен 'Да'
		Тогда табличный документ 'Результат' равен:
			| 'Отбор:' | 'Товар Равно "Молоко" И\nСклад Равно "Склад отдела продаж"' | ''                   |
			| ''       | ''                                                          | ''                   |
			| 'Товар'  | 'Склад отдела продаж'                                       | 'Итого'              |
			| ''       | 'Количество Остаток'                                        | 'Количество Остаток' |
			| 'Молоко' | '100,00'                                                    | '100,00'             |
			| 'Итого'  | '100,00'                                                    | '100,00'             |
		И я снимаю флаг с именем 'КомпоновщикНастроекПользовательскиеНастройкиЭлемент2Использование'
		И я снимаю флаг с именем 'КомпоновщикНастроекПользовательскиеНастройкиЭлемент1Использование'
		И я закрываю все окна клиентского приложения
		